# Network Test Tool

Утилита командной строки для массовой проверки доступности IP-адресов из заданных CIDR-подсетей с определением провайдера (ASN) через whois. Инструмент автоматически пингует несколько IP-адресов из подсети, чтобы найти хотя бы один активный, и собирает результаты в удобную таблицу с возможностью сохранения в CSV.

## Требования
- Linux (Debian, Ubuntu, CentOS, RHEL)
- `python3`
- `ping`
- `whois`

*(Скрипт попытается автоматически установить недостающие системные зависимости при запуске из-под root)*

## Установка одним скриптом

### Для Linux (Ubuntu, Debian, CentOS и др.)
Вы можете установить или обновить скрипт глобально в систему, выполнив следующую команду:
```bash
curl -sSL https://raw.githubusercontent.com/Vinton777/network-cidr-test-ip/master/install.sh | sudo bash
```

### Для Termux (Android)
В Termux (смартфоны, планшеты) выполните команду установки **без sudo**:
```bash
curl -sSL https://raw.githubusercontent.com/Vinton777/network-cidr-test-ip/master/install.sh | bash
```

*(Либо вы можете клонировать репозиторий и запускать скрипт `./network_test.sh` локально)*

## Использование

1. Создайте файл `cidr.txt` (для тестирования подсетей) или `ip.txt` (для конкретных IP-адресов) в любой удобной вам папке:

**Пример `cidr.txt`**:
```text
1.1.1.0/24
8.8.8.0/24
192.168.0.0/16
```

**Пример `ip.txt`**:
```text
8.8.8.8
1.1.1.1
94.140.14.14
```

2. Откройте терминал в этой папке и запустите:
```bash
network_test
```
Инструмент задаст вопросы о количестве IP-адресов для пинга на каждую подсеть, установит тайм-аут, спросит **сколько потоков использовать** (по умолчанию `20`) и предложит сохранить результаты в `results.csv`.

## Особенности
- **Автономность**: Логика написана на Python с использованием стандартных библиотек (`ipaddress`, `csv`, `subprocess`, `concurrent.futures`). Не нужны никакие `pip install`.
- **Эффективность**: Не создает полный список IP-адресов подсети в оперативной памяти — адреса выбираются математически.
- **Многопоточность**: Проверки доступности IP выполняются параллельно с заданным числом потоков, что позволяет очень быстро обрабатывать огромные списки CIDR. При этом Whois-запросы выполняются последовательно для стабильности.
- **Кэширование**: Результаты ASN-запросов к `whois` кэшируются для ускорения обработки близких или совпадающих подсетей.
- **Цветовая индикация**: Использует ANSI-цвета: живые подсети отмечаются \033[92mзеленым\033[0m, а мертвые \033[91mкрасным\033[0m.
