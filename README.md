# NetBlock Analyzer

Утилита командной строки для массовой проверки доступности IP-адресов из заданных CIDR-подсетей с определением провайдера (ASN) через whois. Инструмент автоматически пингует несколько IP-адресов из подсети, чтобы найти хотя бы один активный, и собирает результаты в удобную таблицу с возможностью сохранения в CSV.

## Требования
- Linux (Debian, Ubuntu, CentOS, RHEL)
- `python3`
- `ping`
- `whois`

*(Скрипт попытается автоматически установить недостающие системные зависимости при запуске из-под root)*

## Установка 

Выполните следующую команду в терминале (подходит как для Linux, так и для Termux на Android):
```bash
curl -sSL https://raw.githubusercontent.com/Vinton777/netblock-analyzer/master/install.sh | bash
```

> **Примечание для Linux:** Скрипт устанавливается в `/opt/` и `/usr/local/bin/`. Если вы обычный пользователь (не root), скрипт попросит вас запустить его с правами суперпользователя: `curl ... | sudo bash`

*(Либо вы можете клонировать репозиторий и запускать скрипт `./netblock_analyzer.sh` локально)*

## Варианты проверки

25: При запуске вы можете выбрать один из встроенных списков или подсунуть свои файлы `cidr.txt` / `ip.txt`:
26: 1. **Свой список CIDR** (`cidr.txt`)
27: 2. **Свой список IP** (`ip.txt`)
28: 3. **UFO** (`cidr_ufo.txt`)
29: 4. **Selectel 1** (`cidr_selectel_1.txt`)
30: 5. **Selectel 2** (`cidr_selectel_2.txt`)
31: 6. **Selectel Old** (`cidr_selectel.txt`)
32: 7. **Cloud.ru** (`cidr_cloudru.txt`)
33: 8. **Yandex** (`cidr_yandex.txt`)
34: 9. **VK** (`cidr_vk.txt`)
35: 10. **Reg.ru** (`cidr_regru.txt`)

## Использование

1. (Опционально) Создайте файл `cidr.txt` (для тестирования своих подсетей) или `ip.txt` (для конкретных IP-адресов) в любой удобной папке.

**Пример `cidr.txt`**:
```text
1.1.1.0/24
8.8.8.0/24
```

**Пример `ip.txt`**:
```text
8.8.8.8
1.1.1.1
```

2. Откройте терминал в этой папке (или любой другой, если используете встроенные списки) и запустите:
```bash
netblock_analyzer
```
Скрипт предложит выбрать режим (1-8), задаст вопросы о количестве IP для пинга, спросит про тайм-аут и предложит сохранить результаты в `results.csv`.

## Особенности
- **Автономность**: Логика написана на Python с использованием стандартных библиотек (`ipaddress`, `csv`, `subprocess`, `concurrent.futures`). Не нужны никакие `pip install`.
- **Эффективность**: Не создает полный список IP-адресов подсети в оперативной памяти — адреса выбираются математически.
- **Многопоточность**: Проверки доступности IP выполняются параллельно с заданным числом потоков, что позволяет очень быстро обрабатывать огромные списки CIDR. При этом Whois-запросы выполняются последовательно для стабильности.
- **Кэширование**: Результаты ASN-запросов к `whois` кэшируются для ускорения обработки близких или совпадающих подсетей.
- **Цветовая индикация**: Использует ANSI-цвета: живые подсети отмечаются \033[92mзеленым\033[0m, а мертвые \033[91mкрасным\033[0m.
